			FAQ по FIDOGATE
			~~~~~~~~~~~~~~~

Cоздатель FAQ Serge N. Pokhodyaev (2:5020/1838, snp@ru.ru)

FAQ ведет Maxi Rovnich (2:5030/872, rmax@pl.school.ioffe.rssi.ru)

Если вы хотите внести какие-либо изменения или дополнения в этот FAQ, пишите
по указанным выше адресам (предпочтительнее по фидошному).

Данный FAQ периодически постится в эхоконференцию RU.UNIX.FTN (из internet
доступна как ньюсгруппа fido7.ru.unix.ftn) и выкладывается по адресам:
http://872maxi.chat.ru
______________________________________________________________________________

В создании, изменении и дополнении этого FAQ участвовали:
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
(SNP): Serge N. Pokhodyaev (2:5020/1838, snp@ru.ru)
(PVC): Peter V. Chernikoff (2:5020/2091)
(MR):  Maxi Rovnich (2:5030/872)
(VS):  Valery Shishkov (2:5040/9)
(ID):  ivan demakov (2:5000/26.600)
(DF):  Dmitry Fedotov (2:5030/1229)
(DR):  Dmitry Rodin (2:5020/5410)
(VM):  Vladimir Mosgalib (2:5030/1041.17)
(OS):  Oleg Sheremetinsky (2:5023/34.26, sheremet@kaluga.ru)
______________________________________________________________________________

Список вопросов:
~~~~~~~~~~~~~~~~
 1. Что это такое?
 2. Где взять?
 3. Зачем нужен патч `-snp'?
 4. Как работает?
 5. Как настроить транзитную подписку?
 6. Как сделать autocreate эх?
 7. Как подружить с INN, в котором используется storage API?
 8. У меня наблюдается несоответствие количества пришедших сообщений и тех
    сообщений, которые реально прогейтовались.
 9. В outbound'e лежит почта на меня, но она не гейтуется. В логах ничего
    подозрительного нету.
10. Как сделать read-only или mandatory эхи?
11. Есть ли в FIDOGATE режим подписки passive?
12. FIDOGATE псевдографику корежит.
13. Как подружить qmail с FIDOGATE?
14. Как прикрутить FIDOGATE к exim'у?
15. Как прикрутить FIDOGATE к INN?
16. Может ли areafix/filefix работать без использования MTA (sendmail, etc.)?
17. Как сделать локального поинта (для FAQserver'а, etc.)?
18. А у меня rununpack пишет в лог "rununpack: can't save STDOUT", не
    распаковывает почтовые архивы и вообще очень медленно работает. Чем бы ее
    заменить?
19. Поставил sqwarcx - распаковывать стало быстрее, но все равно тоссит эхи
    долго и (для linux) cильно увеличивается использование свопа даже при
    холостом прогоне, когда ничего не тоссится.
20. Где можно прочитать про формат файла (f)areas.bbs?
21. Каков формат поля `key' в файле passwd?
22. Всё настроил по FAQ, а мыло всё равно не ходит. Что делать?
23. Как постить сообщения в эхи, если ньюссервер не используется?
24: Хочу фидошку читать golded'ом, но чтоб оставалась возможность гейтования. 
25. Перестали при autocreate passthru эхи создаваться.
______________________________________________________________________________

1. Что это такое?
~~
(SNP):
Гейт+тоссер. Основное преимущество перед ifmail -- отсутствие двойного
гейтования и связанных с этим проблем. Кроме того fidogate превосходит ifmail
по набору функций. В частности, имеются встроенные areafix/filefix, легко
настраиваются passthru эхи, более продвинутые роутинг и упаковка и др.

______________________________________________________________________________

2. Где взять?
~~
(SNP):
На сайте автора (http://www.fido.de/fidogate/). Патч `-snp' (см. ниже) и
реальные конфиги (для примера) берутся на http://f1838.euro.ru/fidogate/

(MR): Патч `-snp' теперь ведет (DF) и, начиная с -snp19, лежит на
ftp://dig.pp.ru/archive/tools/ftn
______________________________________________________________________________

3. Зачем нужен патч `-snp'?
~~
(SNP):
Во-первых, патч устраняет некоторые проблемы с перекодировкой сообщений из
cp866 в koi8-r и обратно, а также некоторые баги оригинального fidogate.
Во-вторых, добавляет много разных полезных функций, в частности read-only и
mandatory эхи, режим подписки passive, автоматический выбор нужной AKA и
многое другое.

______________________________________________________________________________

4. Как работает?
~~
(SNP):
Fidogate содержит в директории ${prefix}/lib/fidogate/bin/ 5 скриптов,
необходимых и достаточных для работы fidogate: runin, rungate, runmail,
runnews, runout

При запуске runin нетмейл и эхомейл, имеющийся в inbound'е, тоссится и
раскладывается на линков. Мы также считаемся линком, поэтому следует указать
в конфиге (файл routing), чтобы все для наших адресов укладывалось на холд.
Следует заметить, что в процессе тоссинга ни INN, ни sendmail не используются.
Несколько слов об обработке эхомейла. Возможны три варианта. Если очередное
сообщение адресовано в эху, отсутствующую в файле areas.bbs, эха там имеется,
но в списке линков, подписанных на нее отсутствует линк, от которого пришло
это сообщение (используется адрес из заголовка .PKT), то сообщение идет в bad.
Если эха прописана как passthru, то сообщение идет только к линкам, которые
подписаны на эту эху. Если эха не passthru, то сообщение идет и к линкам,
и к нам (т.е. на одну из наших AKA).

После запуска rungate все сообщения на наши адреса, лежащие в outbound'е на
холде, гейтуются (т.е. отдаются INN'у или sensmail'у).

runmail, runnews, runout все сообщения от нас (соответственно: mail, news и
служебные сообщения fidogate) раскладывают на линков.

Запуск этих скриптов лучше всего прописать в crontab.
Более подробная информация содержится в документации на fidogate.


(PVC):
Постараюсь рассказать:

Итак, на пришедший бандл напускается скрипт runin, который вызывает сначала
rununpack (его задача определить, каким архиватором заархивирован бандл и
вызвать соответствующий архиватор), затем пускается runtoss. runtoss --
перловый скрипт, вызывающий в свою очередь ftntoss, ftnroute, ftnpack. Эти
проги смотрят в подписку и раскладывают почту, как написано в areas.bbs,
routing и пакуют ее в соответствии с packing. Почта складывается в аутбаунд,
прописываются flo'шки, hlo'шки, clo'шки. Почта для локального прочтения тоже
попадает в outbound -- свой адрес надо обозначить в routing как:

===
NetMail
send            hold    2:1234/567.0
EchoMail
sendmove        hold    2:1234/567.0
===

а в packing прописать:

===
NetMail
pack            noarc   2:1234/567.0
                        ^^^^^^^^^^ Вместо этого обычно пишут *
EchoMail
pack            noarc   2:1234/567.0
===

Далее при запуске rungate будет вызван ftnin с соответствующим скриптом
ftninpost. ftninpost будет запускать программки, в зависимости от характера
письма. Для переконвертированного в rfc'шный формат письма будет вызван
rnews, если это эхомейл (news), sendmail, если эхо нетмейл (e-mail),
ftninrecomb -- сборщик порезаных сообщений.

(SNP):
Небольшое добавление к словам Peter V. Chernikoff.
Во-первых, pack noarc для наших адресов обязателен, иначе запакованный бандл
так и будет лежать в outbound'е (rungate распознает только непакованное мыло),
кроме того нужно всегда указывать адреса в 4D формате (даже если поинт == 0).
Во-вторых, можно изменить (в лучшую сторону :) схему гейтования. Для этого
прописываем в файл packing (строчка `prog gate ...' -- в одну строку):

===
progn   gate    "${prefix}/lib/fidogate/ftn2rfc -i
                                   -x ${prefix}/lib/fidogate/ftninpost -l %s"

EchoMail
pack    gate    2:1234/567.0
NetMail
pack    gate    2:1234/567.0
===

В этом случае сообщения для нас (т.е. для наших AKA) не будут укладываться в
outbound, а сразу будут гейтоваться. В результате отпадает необходимость в
запуске rungate.

______________________________________________________________________________

5. Как настроить транзитную подписку?
~~
(SNP):
Для этого используется опция `-s <state>' в описании эхи в файле areas.bbs
(или fareas.bbs). Рассмотрим случай, когда мы не подписаны на эху у аплинка.
В описание эхи следует добавить опцию `-s U', а в списке линков первым (и
единственным) должен быть адрес аплинка. Если кто-либо подпишется на данную
эху, его адрес добавляется в список линков. Затем следует запустить команду

	${prefix}/lib/fidogate/bin/ftnafutil subscribe

которая для всех эх, имеющих более одного адреса в списке линков и имеющих
опцию `-s U' сгенерирует запросы на подписку к ареафиксам аплинков и заменит
эту опцию на `-s S'.
Автоматическая отписка происходит похожим образом: необходимо запустить
команду

	${prefix}/lib/fidogate/bin/ftnafutil unsubscribe

которая для всех эх, имеющих только один адрес в списке линков и имеющих
опцию `-s S' сгенерирует запросы на отписку к ареафиксам аплинков и заменит
эту опцию на `-s U'.
Запуск ftnafutil лучше всего прописать в crontab.

______________________________________________________________________________

6. Как сделать autocreate эх?
~~
(SNP):
Поставить патч -snp11 (или свежее) -- в нем уже имеется эта функция

______________________________________________________________________________

7. Как подружить с INN, в котором используется storage API?
~~
(PVC & SNP):
Если в INN используется storage API, нужно немного подправить send-fidogate.
Вот патч:

===8<===
--- send-fidogate.orig  Mon Jan  3 17:55:42 2000
+++ send-fidogate       Thu Jan 27 15:08:43 2000
@@ -63,12 +63,12 @@
     echo "${PROGNAME}: [$$] begin ${SITE}"

 # old version using batcher
-#    time batcher -N ${QUEUEJOBS} -b500000 \
-#      -p"$RFC2FTN -b -n" \
-#      ${SITE} ${BATCHFILE}
+    time batcher -N ${QUEUEJOBS} -b500000 \
+       -p"$RFC2FTN -b -n" \
+       ${SITE} ${BATCHFILE}

 # new version using rfc2ftn in batch file mode
-    time $RFC2FTN -f $BATCHFILE -m 500
+#    time $RFC2FTN -f $BATCHFILE -m 500

     echo "${PROGNAME}: [$$] end ${SITE}"
 done
===8<===

Также рекомендуется man batcher :)

______________________________________________________________________________

8. У меня наблюдается несоответствие количества пришедших сообщений и тех
~~ сообщений, которые реально прогейтовались.

(PVC):
Возможны два варианта:
a) сообщения откинуты в badmail, dupemail или по еще каким-либо
   причинам.
б) при компиляции была задействована оптимизация (-O2 у меня). Печально --
   большая часть сообщений просто пропадало при гейтовании. Выход -- не
   включать оптимизацию.

(MR): В snp-19 проведено выборочное включение оптимизации и указанной проблемы
быть не должно.
______________________________________________________________________________

9. В outbound'e лежит почта на меня, но она не гейтуется. В логах ничего
~~ подозрительного нету.

(PVC):
RH 6.x ? Hужно заменить в packing строку с pack noarc на pack gate. Мне
помогло. Hа RH 5.2 такого не наблюдается.

______________________________________________________________________________

10. Как сделать read-only или mandatory эхи?
~~~
(SNP):
Надо приложить патч `-snp' (см. пункты 2 и 3 этого FAQ), т.к. оригинальный
FIDOGATE не поддерживает ни read-only, ни mandatory. Подробное описание
можно найти в README, идущем вместе с патчем.

______________________________________________________________________________

11. Есть ли в FIDOGATE режим подписки passive?
~~~
(SNP):
В оригинальном -- нет. Он есть в патче `-snp' (см. пункты 2 и 3 этого FAQ).
Подробное описание можно найти в README, идущем вместе с патчем.

______________________________________________________________________________

12. FIDOGATE псевдографику корежит.
~~~
(SNP):
На самом деле, FIDOGATE тут не виноват. Проблема в том, что во многих
дистрибутивах Linux (в частности, RedHat) идет неправильная (т.е. не
соответствующая rfc1489) таблица перекодировки из koi8-r в alt (в RedHat
лежит в /usr/lib/kbd/consoletrans/koi2alt)

Правильную таблицу можно взять, например, из исходников ifmail-2.14.os-p7
(лежит в директории `misc/inouttabs/', файл `outkoi8alt.new'), либо на
ftp://oskin.macomnet.ru/pub/linux/fido/outkoi8alt

Есть и другой вариант -- использовать console-tools-cyrillic (берется на
http://www.ice.ru/~vitus/). Вот пример использования (этот кусок удобно
вставить, например, в rc.local):

===
kbd_path="/usr/local/lib/kbd"
consolechars -f $kbd_path/consolefonts/alt_8x16.psf -m \
                                             $kbd_path/consoletrans/koi8-r.acm
===

______________________________________________________________________________

13. Как подружить qmail с FIDOGATE
~~~
(PVC):
Допустим, наши адреса 2:5020/1354.332 -- Main
                      2:5020/1309.332 -- AKA

$ ls -lga /usr/local/ftn/route/
-rw-r-----   1 ftn      uucp           80 Авг 28 22:12 .qmail-ftn-f1309-default
-rw-r-----   1 ftn      uucp           80 Авг 22 06:22 .qmail-ftn-f1354-default

=== .qmail-ftn-f1309-default ===
|/usr/local/ftn/bin/rfc2ftn -a 2:5020/1309.332 "$DEFAULT"@"$HOST"
===

=== .qmail-ftn-f1354-default ===
|/usr/local/ftn/bin/rfc2ftn "$DEFAULT"@"$HOST"
===

=== /var/qmail/control/virtualdomains ===
p332.f1354.n5020.z2.fidonet.org:ftn-local
p332.f1627.n5020.z2.fidonet.org:ftn-local
f1309.n5020.z2.fidonet.org:ftn-f1309
.fidonet.org:ftn-f1354
===

(VM):

Кроме этого надо создать файл .qmail-ftn-local и прописать в нем свой адрес
______________________________________________________________________________

14. Как прикрутить FIDOGATE к exim'у?
~~~
(PVC):
а) Конфиги для поинта с двумя АКА.
Вот мои конфиги (еще не значит, что правильные).
Предположим, что мы имеем два адреса: 2:5020/1354.332 -- Main
                                      2:5020/1309.332 -- AKA

=== /etc/exim/exim.conf ===
######################################################################
#                      TRANSPORTS CONFIGURATION                      #
######################################################################

fidogate_local:
  driver = pipe
  user = ftn
  group = uucp
  command = "/usr/local/ftn/lib/rfc2ftn -i ${pipe_addresses}"


fidogate_1309:
  driver = pipe
  user = ftn
  group = uucp
  command = "/usr/local/ftn/lib/ftnmail -i -a 2:5020/1309.332 ${pipe_addresses}"

fidogate_1354:
  driver = pipe
  user = ftn
  group = uucp
  command = "/usr/local/ftn/lib/ftnmail -i ${pipe_addresses}"


######################################################################
#                      ROUTERS CONFIGURATION                         #
######################################################################

fidonet_local:
  transport = fidogate_local
  driver = domainlist
  route_file = CF/ftntable_local
  search_type = partial-lsearch*

fidonet_1309:
  transport = fidogate_1309
  driver = domainlist
  route_file = CF/ftntable_1309
  search_type = partial-lsearch*

fidonet_1354:
  transport = fidogate_1354
  driver = domainlist
  route_file = CF/ftntable_1354
  search_type = partial-lsearch*

===

Хочу напомнить, что более специальные правила должны быть записаны перед более
общими. То есть роутинг для фидо должен идти _ПЕРЕД_ транспортом/роутерами для
smtp, local и пр.

=== /etc/exim/ftntable_local ===
p332.f1354.n5020.z2.fidonet.org:        p332.f1354.n5020.z2.fidonet.org
p332.f1309.n5020.z2.fidonet.org:        p332.f1309.n5020.z2.fidonet.org
===

=== /etc/exim/ftntable_1309 ===
*.f1309.n5020.z2.fidonet.org:   f1309.n5020.z2.fidonet.org
===

=== /etc/exim/ftntable_1354 ===
*.fidonet.org:       f1354.n5020.z2.fidonet.org
===

б) Конфиги для нода с левонетами.
Конфиги не мои, но написал тоже я :-)) (опять-таки, совершенно не означает,
что правильные).
Предположим, наши адреса: 2:5020/1354 -- Main
                          275:5020/8  -- AKA
                          777:5020/32 -- AKA
                          963:1/87    -- AKA

=== /etc/exim/exim.conf
######################################################################
#                      TRANSPORTS CONFIGURATION                      #
######################################################################

fidogate:
  driver = pipe
  user = ftn
  group = uucp
  command = "/usr/local/ftn/lib/rfc2ftn -i ${pipe_addresses}"


######################################################################
#                      ROUTERS CONFIGURATION                         #
######################################################################

fidonet:
  transport = fidogate
  driver = domainlist
  route_file = /etc/exim/ftntable
  search_type = partial-lsearch*

===

=== /etc/exim/ftntable ===
## FidoNet
*.fidonet.org                   f1354.n5020.z2.fidonet.org

## HackNet
*.hacknet.org                   f8.n5020.z275.hacknet.org

## BasicNet
*.basicnet.org                  f32.n5020.z275.basicnet.org

## ViwaNet
*.viwanet.ru                    f87.n1.z963.viwanet.ru

===

в) Как настроить автоматическую посылку почты в инет на гейт ?

    ПРЕДУПРЕЖДЕHИЕ: это -- на свой страх и риск.

=== /usr/exim/etc/exim.conf ===
######################################################################
#                      REWRITE CONFIGURATION                         #
######################################################################

*@*     "${lookup {$2}partial0-lsearch{/usr/exim/etc/norewrite}\
 {$local_part@$domain}\
 {$1%$2@f128.n5020.z2.fidonet.org}  }" Tt

# End of Exim configuration file
===

=== /usr/exim/etc/norewrite ===
*.localhost
*.localdomain
*.digger.org.ru
*.fidonet.org
===

    Спасибо Dema Olyenyov за его вариант.


(ID):
вот еще вариант конфига (тот что в был в faq'е у меня не заработал)
имеется два фидошных адреса: 2:5000/26.600 и 2:5000/54.6

=== /etc/exim.conf ===

local_domains =
localhost:p6.f54.n5000.z2.fidonet.org:p600.f26.n5000.z2.fidonet.org

######################################################################
#                      TRANSPORTS CONFIGURATION                      #
######################################################################

fido:
  driver = pipe
  user = ftn
  group = ftn
  command = "/usr/lib/fido/rfc2ftn -a ${host} -i ${pipe_addresses}"


######################################################################
#                      ROUTERS CONFIGURATION                         #
######################################################################

fido:
  transport = fido
  driver = domainlist
  route_file = /etc/fido/ftntable
  search_type = partial-lsearch*
===

=== /etc/fido/ftntable ===
*.f54.n5000.z2.fidonet.org:	p6.f54.n5000.z2.fidonet.org
*.f26.n5000.z2.fidonet.org:	p600.f26.n5000.z2.fidonet.org
*.fidonet.org:			p600.f26.n5000.z2.fidonet.org
===
______________________________________________________________________________

15. Как прикрутить INN к FIDOGATE.
~~~
(PVC):
Легко.
Допустим, наш хост зовут alien.digger.org.ru.

=== inn.conf ===
[skip]
server:                 alien.digger.org.ru
pathhost:               alien.digger.org.ru
moderatormailer:        alien.digger.org.ru
fromhost:               alien.digger.org.ru
[skip]
innflags:               -c0 -u
[skip]
===

=== expire.ctl ===
/remember/:30
*:A:1:7:15
===

man expire.ctl будет ОЧЕHЬ невредно сделать.

=== nnrp.access ===
stdin:Read Post:::*
127.0.0.1:Read Post:::*
192.168.3.2:Read Post:::*
localhost:Read Post:::*
alien.digger.org.ru:Read Post:::*
===

=== newsfeeds ===
ME\
    :*,\
    !junk,\
    !control\
    ::

fidogate\
    :*,!cc,\
    !junk,\
    !control\
    :Tf,Wnb:fidogate
===


(SNP):
Для предотвращения дупов в fidogate.conf должно быть прописано:

===
NewsPathTail  "fidogate!not-for-mail"
===

т.е. имя сайта, указанного в newsfeeds для fidogate должно добавляться в
строку `Path: ' каждого RFC сообщения.

(OS): Пример конфигов для правильного гейтования при использовании 
      двух АКА в одной зоне:

=== newsfeeds ===
ME:!*,!junk,!control*::

fido-klg\
    :klg*,rusb*,rucb*\
    !junk,\
    !control\
    :Tf,Wnb:fido-klg

fidogate\
    :*,\
    !junk,\
    !klg*,!rusb*,!rucb*,\
    !control\
    :Tf,Wnb:fidogate
===

Исправления в send-fidogate:

===
*было*
# new version using rfc2ftn in batch file mode
    time $RFC2FTN -f $BATCHFILE -m 500

*стало*
    if [ $SITE = "fido-klg" ] ; then
	time $RFC2FTN -a 2:5023/34.26 -f $BATCHFILE -m 500
    else
	time $RFC2FTN -f $BATCHFILE -m 500
    fi
===

При запуске send-fidogate с входным параметром fido-klg, тогда тоссится 
по первому варианту калужские эхи, если без параметра - все остальные.

Для предотвращения дупов в fidogate.conf должно быть прописано:

===
NewsPathTail  "fido-klg!fidogate!not-for-mail"
===

______________________________________________________________________________

16. Может ли areafix/filefix работать без использования MTA (sendmail, etc.)?

(SNP):
Может. Вот пример:

=== routing ===
remapto    2:5020/1838.0     2:5020/1838.9000	"areafix"
remapto    2:5020/1838.0     2:5020/1838.9001	"filefix"
remapfrom  2:5020/1838.9000  2:5020/1838.0      "*"
remapfrom  2:5020/1838.9001  2:5020/1838.0      "*"
===

=== packing ===
progn   areafix   "/usr/local/lib/fidogate/ftnafpkt -l %s"
progn   filefix   "/usr/local/lib/fidogate/ftnafpkt -l -F %s"

NetMail
pack    areafix   2:5020/1838.9000
pack    filefix   2:5020/1838.9001
===

______________________________________________________________________________

17. Как сделать локального поинта (для FAQserver'а, etc.)?
~~~
(SNP):
Все очень просто. Предположим, что нужно все сообщения, пришедшие на адрес
2:5020/1838.100 направлять на адрес <locpoint@localhost>, тогда:

=== /usr/local/etc/fidogate/aliases ===
locpoint	2:5020/1838.100		"*"
===

=== /usr/local/etc/fidogate/routing ===
NetMail
route	hold	2:5020/1838.0	2:5020/1838.100
===

______________________________________________________________________________

18. А у меня rununpack пишет в лог "rununpack: can't save STDOUT", не
~~~ распаковывает почтовые архивы и вообще очень медленно работает. Чем бы ее
    заменить?

(MR):
Можно взять sqwarcx. Брать там же, где и sqwish: пока лежит на
http://www.fortunecity.com/meltingpot/Myrtle/216/index.html.

Преимущества перед rununpack:

    - меньше вывод на консоль; архиваторы вообще работают в режиме "полного
      молчания"..
    - архиватор запускается всего один раз на каждый архив, а не два..
    - требует для работы куда меньше памяти и работает быстрее; sqwarcx -
      программа на C в отличие от перлового rununpack.

Кроме того в rununpack лучше отключить поддержку распознавания лишних
архиваторов, особенно "ARC", т.к. по одному байту нельзя судить о типе архива.

(VS):
При настройке sqwarcx обратите внимание на то, как описаны ключи у вашего
архиватора в compress.cfg. Дело в том, что если позволяет описание архиватора,
то sqwarcx пытается вытаскивать пакеты из архива по маске "*.pkt" (в lower
case!). Hекоторые же тоссеры (ParToss под DOS/Win95/Win98/WinNT или тот же
FIDOGATE под UNIX) пакуют в архив пакеты с именами в upper case. Поэтому при
распаковке такого архива по маске "*.pkt" архиватор выдаст сообщение, что
файлы с такой маской не найдены.

Для предотвращения подобной ситуации либо уберите шаблон для маски в описании
архиватора, либо (если позволяет архиватор) вставьте в описание ключ для
работы в case insensitively. Для zip'а это будет выглядеть

	UNIX	Extract	/usr/bin/unzip -LCjq %a %f

Обратите внимание, что описание некоторых аархиваторов встречается несколько
раз! Поэтому не забудьте внести исправление во все строки, где встречается ваш
архиватор.

______________________________________________________________________________

19. Поставил sqwarcx - распаковывать стало быстрее, но все равно тоссит эхи
~~~ долго и (для linux) cильно увеличивается использование свопа даже при
    холостом прогоне, когда ничего не тоссится.

(MR):
sqwarcx заменяет только перловый скрипт rununpack. Кроме этого при тоссинге
запускается еще несколько перловых скриптов. Возможно стоит посмотреть, ка-
кие функции какой скрипт выполняет и избавиться от перловых скриптов совсем.

______________________________________________________________________________

20. Где можно прочитать про формат файла (f)areas.bbs?
~~~

(SNP):
Во-первых, в документации: fidogate-x.x.x/doc/fidogate.txt, раздел называется
`areas.bbs' EchoMail Distribution
Во-вторых, все дополнения, вносимые в формат патчем `-snp' описаны в README
к патчу.

______________________________________________________________________________

21. Каков формат поля `key' в файле passwd?
~~~

(SNP):
Буквами можно ограничивать подписку на определённые группы эх. Если для эхи
в файле (f)areas.bbs опцией `-k' указаны одна или несколько букв, и все эти
буквы присутствуют в файле passwd в поле `key' строки для определённого линка,
то это линк сможет подписаться на эху. В противном случае -- не сможет.
Кроме того в поле `key' можно указывать ещё и специальные символы:

	&	разрешить линку команду ареафикса `%new',
		а также autocreate эх (начиная с патча snp11)
	~	разрешить линку команду ареафикса `%delete'
	%	разрешить линку команду ареафикса `%listall' (начиная с патча
		 snp11)

______________________________________________________________________________

22. Всё настроил по FAQ, а мыло всё равно не ходит. Что делать?
~~~

(SNP):
Если используется патч snp и в лог пишутся примерно такие сообщения:

===
Jan 32 09:19:63 rfc2ftn BOUNCE: Gateway netmail from address `user@localhost'
 to `2:xxxx/xxx' not allowed - skipped
===

то для решения проблемы нужно создать в директории ${prefix}/etc/fidogate файл
`acl' и записать туда вот это:

===
Echomail
*	*
Netmail
*	*
===

Подробности -- см. в README от патча.

______________________________________________________________________________

23. Как постить сообщения в эхи, если ньюссервер не используется?
~~~

(SNP):
Можно вот таким скриптом постить:

===
#!/bin/sh

fgpath="/usr/local/lib/fidogate"
outpath="/var/spool/fido/outpkt/news"
addr="2:xxx/xxx.xxx"
ngprefix="ftn"

(
    /bin/echo From: $1
    /bin/echo Subject: $2
    /bin/echo X-Comment-To: All
    /bin/echo Newsgroups: ${ngprefix}.$3
    /bin/echo
    /bin/cat
) | ${fgpath}/rfc2ftn -n -t -a ${addr} -O ${outpath}
===

Запускать его примерно так:

postmsg.sh <e-mail> <subject> <echotag>

______________________________________________________________________________

24: Хочу фидошку читать golded'ом, но чтоб оставалась возможность гейтования. 
~~~
  Т.е. как минимум, чтоб фидошные сообщения гейтовались на ньюс-сервер. 
  Это возможно? Если да, то каким образом?

(DR):
Вместо ftn2rfc прикручивается шелловый скрипт, копирующий pkt в
отдельный директорий, запускающий hpt , а потом ftn2rfc .  А в fidogate ,
в runin прописать тоссинг пакетов из отдельного директория, который в hpt
прописан как аутбаунд.

______________________________________________________________________________

25. При переходе на snp21 при автокриэйте в файле areas.bbs эхи стали
~~~ записываться без лидирующего '#', не попадая таким образом в пассру.
    Что делать, чтобы все вернулось как было?

(MR):
Hадо выключить SNP_FORBIDDEN_CREATE_KEY в сonfig.h
